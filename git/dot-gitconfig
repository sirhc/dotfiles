[user]
    name  = Chris Grau
    email = 113591+sirhc@users.noreply.github.com

[init]
    defaultBranch = main

[color]
    ui = auto

[core]
    editor = vim -i NONE
    excludesFile = ~/.gitignore
    pager = delta

[interactive]
    diffFilter = delta --color-only --features=interactive

[delta]
    features = decorations
    hyperlinks = true
    hyperlinks-file-link-format = "file-line://{path}:{line}"
    light = false
    line-numbers = true
    navigate = true # use n and N to move between diff sections
    paging = always
    side-by-side = true

[delta "interactive"]
    keep-plus-minus-markers = false

[delta "decorations"]
    commit-decoration-style = blue ol
    commit-style = raw
    file-style = omit
    hunk-header-decoration-style = blue box
    hunk-header-file-style = red
    hunk-header-line-number-style = "#067a00"
    hunk-header-style = file line-number syntax

[receive]
    denyCurrentBranch = warn

[merge]
    conflictstyle = diff3
    tool = fugitive

[merge "daff-csv"]
    name   = daff tabular csv merge
    driver = daff merge --output %A %O %A %B

[mergetool]
    prompt = false

[mergetool "fugitive"]
    cmd = vim -f -c \"Gvdiffsplit!\" \"$MERGED\"

[diff]
    colorMoved = default
    renames = true
    tool = vimdiff
    wsErrorHighlight = all

[diff "daff-csv"]
    command = daff diff --git

[diff "perl"]
    xfuncname = "^\\s*(sub.*)"

[difftool]
    prompt = false

[fetch]
    prune = true

[push]
    default = current

[pull]
    rebase = false

[credential]
    helper = store

[alias]
    # Abbreviations.
    br = branch -avv
    ci = commit
    co = checkout
    dc = diff --cached
    dt = difftool
    fa = fetch --all
    mt = mergetool
    one = log --oneline
    pudr = push --dry-run
    puor = push --set-upstream origin master
    puordr = push --set-upstream --dry-run origin master
    re = remote -v
    s = status -u -s
    wd = diff --word-diff

    bare = init --bare --shared=true
    cached = diff --cached
    graph = log --all --graph --oneline --decorate
    hist = log --graph --pretty='[%h]%d %cd %s'
    ls = ls-tree --abbrev=8 -r HEAD
    realclean = clean -dfx
    root = rev-parse --show-toplevel
    stat = diff --stat
    untrack = rm --cached
    tags = show-ref --tags
    hard = reset --hard HEAD
    open = !gh repo view -w

    show-tag = !git name-rev --tags --name-only $(git rev-parse HEAD)

    orphank = !gitk --all `git reflog | cut -c1-7`
    orphant = !tig --all `git reflog | cut -c1-7`
    orphanl = !git log `git reflog | cut -c1-7`

    who = shortlog -s --
    dv = !git diff | vim -
    k = !exec gitk --all &
    mylog = !git log --author=`git config --global user.email` --stat -C

    # https://git.wiki.kernel.org/index.php?title=Aliases
    aliases = !git config --get-regexp 'alias\\..*' | colrm 1 6 | sed 's/[ ]/ = /' | sort -k1

    # http://www.jamielennox.net/blog/2014/08/15/git-commands-for-messy-people/ (with spicyjack's change)
    branch-date = "!git for-each-ref --sort=committerdate --format='%1B[30;1m%(objectname:short) %1b[0;m%1B[32m%(committerdate:iso8601) %1B[34m%(committerdate:relative) %1B[0;m%(refname:short)' refs/heads/"

    # https://twitter.com/sirhc/status/595663794078121984
    commits-per-day = !git log --pretty=format:%cd --date=short | uniq -c

    describe-branch = !git config --local \"branch.$( git branch | awk '/^\\*/{print $2}' ).description\"

    # http://blogs.perl.org/users/ovid/2015/06/git-stashed.html
    stashed = stash list --pretty=format:'%gd: %Cred%h%Creset %Cgreen[%ar]%Creset %s'

    lastlog = log -1 --pretty='%s'

    # http://megakemp.com/2016/08/25/git-undo/
    undo = "!f() { git reset --hard $(git rev-parse --abbrev-ref HEAD)@{${1:-1}}; }; f"

    exclude-file = "!f(){ echo \"$1\" >> .git/info/exclude; }; f"
    ignore-file  = "!f(){ echo \"$1\" >> .gitignore; }; f"

    # https://twitter.com/ryber/status/931546873441275906
    whereis = branch -r --contains

    # Local tracking branch management.
    gone = !git branch -vv | cut -c 3- | awk '/: gone\\]/'
    prune-branches = !git branch -vv | awk '$1 != \"*\" && /\\[origin\\// && /: gone\\]/ { print $1 }' | xargs -r git branch -d

    # Clone repository and register it with mr.
    cr = "!f(){ git clone \"$1\" && mr register \"$(basename \"$1\" .git)\"; }; f"

    # https://github.polettix.it/ETOOBUSY/2021/10/10/git-forest/
    lg = log --graph --abbrev-commit --date=relative --date-order --format=format:'%C(yellow)%h%Creset -%C(yellow)%d%Creset %s %C(green)(%cr)%Creset %Cred<%an>%Creset'

    current-branch = rev-parse --abbrev-ref HEAD
    default-branch = !git remote show origin | awk '/HEAD branch:/ { print $NF }'
    switch-default = !git switch $( git default-branch )

    set-origin = ! git remote add origin $( gh repo view $( basename $( pwd ) ) --json url --jq '.url' )

[include]
    path = ~/.gitconfig.local

[advice]
    detachedHead = false
